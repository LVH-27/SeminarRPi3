\documentclass[12pt,a4paper]{article}

\usepackage[croatian]{babel}
\usepackage[utf8]{inputenc}
\usepackage[hyphens]{url}

\usepackage{graphicx}

\usepackage[margin=2cm]{geometry}
\usepackage[colorlinks=true,urlcolor=black]{hyperref}
\pagenumbering{gobble}

\begin{document}
	\title{Očitavanje senzorskih podataka korištenjem računala Raspberry Pi 3}


	\date{\vspace{-5ex} 3. travnja 2017.}
	\maketitle

	\tableofcontents
	\newpage

\section{Uvod}
Ovaj će seminarski rad obraditi problematiku korištenja računala Raspberry Pi 3 za prikupljanje podataka sa senzora. Ukratko će se opisati sklopovska arhitektura računala Raspberry Pi 3 te pripadajuća programska podrška, uz nekoliko primjera korištenja. \\ \par
Kao vrlo pristupačno malo računalo, Raspberry Pi je vrlo popularan kao ugradbeno računalo, a budući da ugradbena računala vrlo često za svoj rad koriste raznolike senzore, za ovaj će rad biti ključno razumjeti osnovne principe povezivanja senzora i računala, uzimajući u obzir sklopovski i programski aspekt. Shodno tome, bit će izložen kratak opis jednog akcelerometra, u funkciji senzora za mjerenje vibracija, te jednog mikrofona, poglavito u funkciji senzora glasnoće. \\ \par
Ukratko će se opisati neke od dostupnih biblioteka i programskih okvira namijenjenih za rad sa senzorima, s naglaskom na već spomenute akcelerometre i mikrofone. Konačno, bit će pokazan i jednostavan primjer programskog koda za očitavanje podataka sa senzora uz prateći primjer vizualnog prikaza senzorskih podataka. \\
\newpage


\section{Raspberry Pi}

Raspberry Pi je serija malih računala razvijanih od strane zaklade Raspberry Pi Foundation. Odlikuju ih niska cijena, dobre performanse s obzirom na cijenu, pristupačnost i lako korištenje te male fizičke dimenzije. Programska je podrška otvorena i vrlo dobro dokumentirana, a zajednica ljudi koji koriste Raspberry Pi je velika, pristupačna i konstruktivna. \\
\par
U trenutku pisanja su dostupni Raspberry Pi 1, 2 i 3, te minijaturni Raspberry Pi Zero. U nastavku će rada riječ biti o Raspberry Pi 3 inačici, koja se vidi na Slici \ref{fig:rpi3}, a bit će oslovljena kao "RPi3".
\begin{figure}[h!]
  \includegraphics[width=\linewidth]{slike/rpi3_color.png}
  \caption{Raspberry Pi 3B.}
  \label{fig:rpi3}
\end{figure}

	\subsection{Sklopovlje}
		\paragraph{Glavni čipovi} % (fold)
		\label{par:main_chips}
		
		Glavne procesne jedinice nalaze se u čipu Broadcom BCM2837, koji je na slici označen crvenim pravokutnikom. Riječ je o tzv. \textit{System-on-Chip} (SoC) čipu koji sadrži:
		\begin{itemize}
			\item \textbf{CPU} - 64-bitni ARMv8 Cortex A53 s četiri jezgre na 1.2 GHz,
			\item \textbf{GPU} - VideoCore IV na 400 MHz.
		\end{itemize}

		\par Taj je SoC spregnut s \textbf{radnom memorijom} s druge strane tiskane pločice. Riječ je o LPDDR2 SDRAM memoriji, s kapacitetom od 1 GB.

		\par Za bežičnu je komunikaciju zadužen procesor osnovnog pojasa (engl. \textit{baseband processor}) BCM43438, također od tvrtke Broadcom, koji podržava WiFi i Bluetooth 4.1 protokole. Smješten je na stražnjoj strani pločice, a spregnut je s antenom na prednjoj strani. Nije zgorega napomenuti da je Raspberry Pi 3 prva inačica ovog računala koja ima ugrađeno sklopovlje za bežičnu komunikaciju.

		\par Konačno, SMSC LAN9514 (na slici uokviren plavom bojom) vrši funkciju USB čvora i Ethernet upravljača. Povezan je s procesorom jednom USB vezom, pa sa svakim od četiri USB priključka, te s Ethernet priključkom procesor komunicira preko te USB veze.
		% paragraph glavni_cipovi (end)

		\paragraph{Ulazno-izlazni priključci} % (fold)
		\label{par:IO_ports}
		
		Kao i svako drugo računalo, i RPi3 bi bio prilično beskoristan bez mogućnosti komunikacije s vanjskim svijetom. Naravno, na njemu postoji mnoštvo ulazno-izlaznih sučelja, a način na koji su ona izvedena je uvelike zaslužan za takvu popularnost ovog računala. Za ovaj seminar najvažniji priključci označeni su na Slici \ref{fig:rpi3}, a u nastavku je dan pregled tih sučelja:
		\begin{itemize}
			\item Četiri \textbf{USB 2.0} priključka [narančasti pravokutnik]
			\item Jedan \textbf{Ethernet} priključak [žuti pravokutnik]
			\item Jedan \textbf{microUSB} priključak - samo za napajanje, ne i za komunikaciju [ljubičasti pravokutnik]
			\item Četrdeset ulazno-izlaznih pinova opće namjene (\textbf{GPIO} - \textit{General Purpose Input/Output}) [zeleni pravokutnik]
			\item Ulaz za \textbf{\textit{microSD} karticu} (s druge strane pločice)
			\item Audio priključak i HDMI izlaz
			\item Poseban priključak za službenu Raspberry Pi kameru
			\item Poseban \textit{display} priključak
		\end{itemize}

		\par Od posebne su važnosti za ovaj rad GPIO pinovi. Oni, su, naime, ključni za komunikaciju sa senzorima koji će biti razmotreni kasnije u radu. Omogućuju najčešće korištene \textit{low-level} protokole za sklopovsku komunikaciju: \textbf{I$^2$C, TTL i SPI.} Naravno, sadrže i pinove za napajanje i uzemljenje sklopova, kao i pinove namijenjene za korisničku definiciju ponašanja.
		% paragraph ulazno_izlazni_priključci (end)

	\subsection{Programska podrška}
		Programska je podrška za RPi3, baš kao i sklopovlje, izvedena s ciljem jednostavnosti i fleksibilnosti korištenja. Budući da nije riječ o mikrokontroleru (poput, primjerice, popularnog Arduina), već o potpuno opremljenom računalu, očito je da RPi3 mora imati neki operacijski sustav (u nastavku: OS). On se u glavnini slučajeva nalazi na \textbf{\textit{microSD} kartici}, koja ima ulogu sekundarne memorije.\footnote{Moguće je pokrenuti OS i s, primjerice, nekog USB tvrdog diska, ali to nadilazi temu ovog seminara.} Ovdje kao najpopularniji OS za RPi u priču ulazi \textbf{Raspbian.} \\

		\par Raspbian je besplatan i otvoren operacijski sustav baziran na distribuciji Linuxa zvanoj "Debian". Ono zbog čega je Raspbian toliko popularan jest činjenica da je taj \textbf{OS optimiziran upravo za Raspberry Pi sklopovlje.}\footnote{Ovo se može zaključiti i iz imena distribucije, koje je \textit{portmanteau} pojmova "Raspberry Pi" i "Debian".} Drugim riječima, Raspbian je distribucija Linuxa koja:
		\begin{itemize}
			\item je vrlo jednostavna za instalaciju i dolazi potpuno opremljena za normalan računalni rad - uključujući i \textbf{grafičko korisničko sučelje} (\textit{GUI - Graphical User Interface}) 
			\item dolazi s već instaliranom programskom podrškom za komunikaciju sa specijaliziranim sklopovljem (poput GPIO pinova) - primjerice, \textbf{iz terminala, C-a ili Pythona.}
		\end{itemize}


	\subsection{Primjeri korištenja}
	Uzevši u obzir ranije spomenute prednosti RPi3 računala - cijena, pristupačnost i dimenzije - RPi računala najčešće nađu svoju primjenu u dva konteksta:
	\begin{itemize}
		\item u edukativnim projektima (pristupačnost i cijena)
		\item u ugradbenim sustavima (male dimenzije i cijena)
	\end{itemize}
	U nastavku su ukratko izložena dva primjera korištenja RPi3 računala. Primjeri su relativno jednostavni, ali dobro ilustriraju moguće koncepte korištenja tog računala.
	\\
	\paragraph{Pametna brava} % (fold)
	\label{par:smart_lock}
		Pametne su brave koncept novijeg datuma, a označavaju autorizaciju ulaza osobe u neki prostor, i to ne koristeći (samo) klasični, mehanički ključ, nego korištenje kartica, lozinki, ili čak primjerice, prepoznavanja lica. Za implementaciju jedne takve brave može poslužiti bilo kakav mikrokontroler, i RPi3 bi svakako bio pretjeran za tako jednostavan zadatak, ali ono što bi moglo umanjiti taj \textit{overhead} jest, primjerice, praćenje pristupa prostoru pomoću logova, udaljeno upravljanje bravom, ili agregiranje više neovisnih zadataka slične složenosti na jednom RPi-ju.
		\par Računarska sekcija Kluba studenata elektrotehnike konkretno koristi Raspberry Pi 3 za agregiranje informacija o radu nekoliko servera, a u planu je spajanje NFC čitača (\textit{Near-Field Communication} - tehnologija beskontaktne komunikacije korištena u studentskim iskaznicama i bankovnim karticama) na taj isti RPi3, kako bi se na taj način autenticiralo osobe koje žele ući u sekciju.

	% paragraph smart_lock (end)

	\paragraph{Kućni VPN i WiFi pristupna točka} % (fold)
	\label{par:home_vpn}
		U kontekstu komunikacijskih mreža, VPN (\textit{Virtual Private Network}) je protokol spajanja na mrežu koji omogućuje virtualno pristupanje mreži s drugog mjesta i prosljeđivanje svòg lokalnog prometa kroz taj "tunel" na način koji osigurava privatnost i sigurnost, kao i (do neke mjere) svojstva mreže (dozvole i zabrane, primjerice, ili simulacija lokalnog pristupa) kakva su na udaljenoj mreži na koju je korisnik VPN-om spojen. Implementacijski detalji VPN-a nipošto nisu trivijalni, i neće se dalje razmatrati u ovom radu, ali takav se sustav relativno bezbolno može upogoniti upravo koristeći Raspberry Pi, umjesto da se (samo?) za taj zadatak koristi neko (red veličine skuplje) računalo opće namjene.
		\par Još jedna zanimljiva mogućnost koju pruža RPi3 (ali ne i ranije inačice - barem ne bez dodatnog sklopovlja) jest postavljanje pristupne točke za WiFi, koja bi bežični promet prosljeđivala žičnoj Ethernet vezi. Tako se može, u nedostatku kompletnijeg i trajnijeg rješenja, ostvariti \textit{ad hoc} bežična mreža ili pojačivač signala.

	% paragraph home_vpn (end)

\newpage


\section{Senzori}
	Sada kada je definirano računalo koje će agregirati i analizirati očitanja senzora koje ćemo koristiti, vrijeme je da i o njima nešto rečemo. Slučaj koji promatramo jest mjerenje vibracija na mirnim površinama poput vrata, sa svrhom utvrđivanja izvora vibracija. Shodno tome, slijede kratki pregledi jednog akcelerometra, te jednog senzora glasnoće.
	\subsection{Akcelerometar - Adafruit LIS3DH}
		Akcelerometar je ovo i ono
	\subsection{Mikrofon - Adafruit MAX4466 mejbi bejbi?}
\newpage
\section{Pregled dostupnih programskih okvira}

\newpage
\section{Primjeri}
	\subsection{Programski kôd}
	\subsection{Očitani podaci}

\newpage
\section{Zaključak}

\newpage
\section{Literatura}

\begin{itemize}
	\item Raspberry Pi službene stranice: \url{https://www.raspberrypi.org/}
	\item ADXL345: \url{https://learn.adafruit.com/adxl345-digital-accelerometer}
	\item MMA8451: \url{https://learn.adafruit.com/adafruit-mma8451-accelerometer-breakout/wiring-and-test?view=all}
	\item LIS3DH: \url{https://learn.adafruit.com/adafruit-lis3dh-triple-axis-accelerometer-breakout/downloads?view=all}
	\item Zvučni senzori: \url{https://www.sunfounder.com/learn/sensor-kit-v2-0-for-raspberry-pi-b-plus/lesson-19-sound-sensor-sensor-kit-v2-0-for-b-plus.html}
\end{itemize}

\end{document}